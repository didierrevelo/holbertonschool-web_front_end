<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

    <meta charset="utf-8" />
    <title>Task 2</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script type="application/javascript">
        $(document).ready(function() {
            function addPostRow(data) {
                $("body").append(`
            <p>
            <span>Post created with id ${data.id}, title: ${data.title}, author: ${data.author}</span>
            </p>
            `);
            }

            function listPosts() {
                const url = "http://localhost:3000/posts";
                $.get(url, {
                    _sort: "id",
                    _order: "desc"
                }, function(
                    data,
                    status,
                    info
                ) {
                    if (info.readyState === 4 && info.status === 200) {
                        for (i of data) {
                            addPostRow(i);
                        }
                    }
                }).fail(function() {
                    alert("Server Error");
                });
            }

            listPosts();
        });
    </script>
</head>

<body>

</body>

</html>